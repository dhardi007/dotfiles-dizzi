###############################
### WINDOWS AND WORKSPACES ###
###############################

# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
# See https://wiki.hyprland.org/Configuring/Workspace-Rules/ for workspace rules

# Example windowrule v1
# Reglas de VSCODE para transaprencia / alternativa a Vibrancy
# windowrulev2 = opacity 0.80, class:^(.term)$
windowrulev2 = opacity 0.90, class:^(code-oss|code)$
windowrulev2 = opacity 0.90, class:^(cursor)$

# REGLAS PARA ABRIR VLC, Loupe etc mp4 jpg imagenes, videos
# windowrulev2 = float, class:^(vlc|mpv|feh|sxiv|org.gnome.Loupe)$

windowrulev2 = noinitialfocus, class:^(vlc|mpv|feh|sxiv|org.gnome.loupe)$
# ============================================
# NAVEGADORES Y VENTANAS ESPECIALES
# ============================================

# Navegadores principales
windowrulev2 = float, class:^(opera|google-chrome|firefox|chromium|brave-browser|microsoft-edge|vivaldi-stable)$
windowrulev2 = size 664 400, class:^(opera|google-chrome|firefox|chromium|brave-browser|microsoft-edge|vivaldi-stable)$
windowrulev2 = move 65 100, class:^(opera|google-chrome|firefox|chromium|brave-browser|microsoft-edge|vivaldi-stable)$

# Electron/CEF con Google Accounts
windowrulev2 = float, class:^(electron|cef)$, title:.*[Gg]oogle.*[Aa]ccounts.*
windowrulev2 = size 664 400, class:^(electron|cef)$, title:.*[Gg]oogle.*[Aa]ccounts.*
windowrulev2 = move 65 100, class:^(electron|cef)$, title:.*[Gg]oogle.*[Aa]ccounts.*

# ============================================
# PICTURE IN PICTURE - CORREGIDO (Issue #11983)
# ============================================

windowrulev2 = float, title:^(Picture.?in.?[Pp]icture)$
windowrulev2 = pin, title:^(Picture.?in.?[Pp]icture)$
windowrulev2 = size 600 338, title:^(Picture.?in.?[Pp]icture)$
windowrulev2 = keepaspectratio, title:^(Picture.?in.?[Pp]icture)$
windowrulev2 = noborder, title:^(Picture.?in.?[Pp]icture)$
windowrulev2 = opacity 1.0 override 1.0 override, title:^(Picture.?in.?[Pp]icture)$
windowrulev2 = move 100%-w-40 4%, title:^(Picture.?in.?[Pp]icture)$

# ============================================
# NEMO DESKTOP - SOLUCIÓN SIMPLE
# ============================================
# Agregar estas líneas a tu windows.conf

# Hacer que nemo-desktop siempre sea flotante automáticamente
windowrulev2 = float, class:^(nemo-desktop)$
windowrulev2 = size 800 600, class:^(nemo-desktop)$
windowrulev2 = center, class:^(nemo-desktop)$

# === REGLAS DE LIBRE OFFICE ===
# LibreOffice (como impresoras, etc.)
windowrulev2 = float, title:.*Text Import.*
windowrulev2 = float, class:^(soffice)$

# --- REGLA CORREGIDA PARA SATTY ---
# Usa la clase exacta (com.gabm.satty) para forzar el modo flotante
# y evitar problemas con el tiling al cerrar el editor de capturas.
windowrulev2 = float, class:^(com.gabm.satty)$
windowrulev2 = noborder, class:^(com.gabm.satty)$
windowrulev2 = center, class:^(com.gabm.satty)$
# Regla para xdg-desktop-portal-gtk (apps Electron con GTK portal)
windowrulev2 = float, class:^(xdg-desktop-portal-gtk)$
windowrulev2 = size 964 800, class:^(xdg-desktop-portal-gtk)$
windowrulev2 = move 65 100, class:^(xdg-desktop-portal-gtk)$
windowrulev2 = center, class:^(xdg-desktop-portal-gtk)$
# Matching más específico para Electron
windowrulev2 = float, class:^(xdg-desktop-portal-gtk)$, title:.*Electron.*
windowrulev2 = float, class:^(xdg-desktop-portal-gtk)$, title:.*Chromium.*

# regla adicional para suprimir maximizado (opcional)
# reglas para abrir
# windowrulev2 = stayfocused, floating:1, fullscreen:1
windowrulev2 = suppressevent maximize, class:.* # you'll probably like this.
